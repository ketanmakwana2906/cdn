import json

def merge_lists_with_common_elements(lists):
    merged = []
    
    while lists:
        first, *rest = lists
        merged_list = set(first)
        
        while True:
            for other in rest:
                if merged_list & set(other):  # Check for common elements
                    merged_list.update(other)
                    rest.remove(other)
                    break
            else:
                break
        
        merged.append(list(merged_list))
        lists = rest
    
    return merged

# Load data from JSON file
with open("data.json", "r") as file:
    data = json.load(file)

merged_data = merge_lists_with_common_elements(data)

# Save merged data back to JSON file
with open("merged_data.json", "w") as file:
    json.dump(merged_data, file, indent=4)

print("Merged data saved to merged_data.json")
