in below for update its working perfectly but now when add object in admin by http://localhost:8000/admin/irctc/refundrequest/add/
server 500 error in add , my insert or any other dashboard should not affetcted 
please check

class RefundRequestAdmin(admin.ModelAdmin):
    change_form_template = 'admin/refund_change_form.html'

    def get_extra_booking_refund_data(self, obj):
        # Replace with real logic
        return {
            "booking_id": f"BK-{obj.id}",
            "refund_reason": "Train cancelled",
            "external_status": "Pending with Razorpay"
        }
    
    def get_urls(self):
        urls = super(RefundRequestAdmin, self).get_urls()
        try:
            custom_urls = [
            url(r'^(?P<object_id>\d+)/say-hello/$',self.admin_site.admin_view(self.changeform_with_extra_context),name='refund-say-hello'),
            ]
        except Exception as e:
            print("exception under urls",e)
        return custom_urls + urls
    
    def changeform_with_extra_context(self, request, object_id, form_url='', extra_context=None):
        try:
            print(type(object_id))
            obj = RefundRequest.objects.get(pk=object_id)
            from irctc.booking_api import fetch_refund_and_booking_details
            extra = {
            "extra_info": fetch_refund_and_booking_details(obj.tm_booking_id),
            }
            print(extra)
            return super().changeform_view(request, object_id, form_url, extra_context=extra)
        except Exception as e:
            print(e)
    actions = ['approve_refund', 'reject_refund']
    
    def get_actions(self, request):
        """
        Customize available actions based on user permissions.
        """
        actions = super().get_actions(request)
        # Only allow actions for superusers
        if not request.user.is_superuser:
            print("under not super user")
            if 'approve_refund' in actions:
                del actions['approve_refund']
            if 'reject_refund' in actions:
                del actions['reject_refund']
        return actions

    def approve_refund(self, request, queryset):
        """
        Approve refunds only if status is 'approval pending'.
        """
        for refund in queryset:
            if refund.status == 'approval pending':
                refund.status = 'approved'
                refund.save()
                self.message_user(request, f"Refund for Booking ID {refund.tm_booking_id} has been approved.")
            else:
                self.message_user(request, f"Cannot approve Booking ID {refund.tm_booking_id}. Status is not 'approval pending'.")

    def reject_refund(self, request, queryset):
        """
        Reject refunds only if status is 'approval pending'.
        """
        for refund in queryset:
            if refund.status == 'approval pending':
                refund.status = 'rejected'
                refund.save()
                self.message_user(request, f"Refund for Booking ID {refund.tm_booking_id} has been rejected.")
            else:
                self.message_user(request, f"Cannot reject Booking ID {refund.tm_booking_id}. Status is not 'approval pending'.")

    approve_refund.short_description = "Approve Selected Refunds"
    reject_refund.short_description = "Reject Selected Refunds"


{% extends "admin/change_form.html" %}

{% block object-tools %}
    {{ block.super }}
    <li>
        <a class="button" href="{% url 'admin:refund-say-hello' original.pk %}">Fetch Booking/Refund Info</a>
    </li>
{% endblock %}

{% block after_field_sets %}
    {% if extra_info %}
        <div style="margin-top: 20px;">
            <h3>Booking Data</h3>
            <h3>Booking Details</h3>
            {% for key, value in extra_info.data.items %}
            <li><strong>{{ key|title }}:</strong> {{ value }}</li>
            {% endfor %}
            <h3>Refund Details</h3>
            {% for key, value in extra_info.data.refund_details.items %}
            <li><strong>{{ key|title }}:</strong> {{ value }}</li>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
