i created django admin dashboard for run raw sql queries, but form not opening only below is coming
Django administration
Home â€º Run SQL Queries
Run SQL Queries





class SQLRunForm(forms.Form):
    query = forms.CharField(
        widget=forms.Textarea(attrs={'rows': 10, 'cols': 100}),
        label="You can Enter Multiple SQL queries separated by a semicolon (;)",
    )

@staff_member_required
def run_sql_view(request):
    result_html = ""
    form = SQLRunForm()  # Initialize the form
    if request.method == 'POST':
        form = SQLRunForm(request.POST)
        if form.is_valid():
            queries = form.cleaned_data['query']
            queries_list = [q.strip() for q in queries.split(';') if q.strip()]
            try:
                with connection.cursor() as cursor:
                    for q in queries_list:
                        if q.lower().startswith("delete") and not request.user.is_superuser:
                            result_html = "<p style='color:red;'>Error: Only super admins can execute DELETE queries.</p>"
                            break
                        cursor.execute(q)
                    result_html += "<p>All queries executed successfully.</p>"
            except Exception as e:
                result_html = f"<p style='color:red;'>Error: {e}</p>"
    return render(
        request,
        'admin/base_site.html',  # Use default admin template
        {
            'form': form,
            'result': result_html,
            'title': 'Run SQL Queries'  # Title for the admin page
        }
    )

original_get_urls = admin.site.get_urls

def custom_admin_urls(original_urls):
    custom_urls = [
        url(r'^Schedule/runsql/$', admin.site.admin_view(run_sql_view), name='run_sql'),
    ]
    return custom_urls + original_urls()

admin.site.get_urls = lambda: custom_admin_urls(original_get_urls)
