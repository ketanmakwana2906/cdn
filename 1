import urllib3
from twilio.rest import Client
from twilio.http.http_client import TwilioHttpClient

# Disable SSL warnings (not recommended for production)
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

# Function to send SMS using Twilio
def send_msg(body, sid, token, from_number, to_number):
    # Custom HTTP client with SSL verification disabled
    proxy_client = TwilioHttpClient()
    proxy_client.session.verify = False

    # Twilio client using custom HTTP client
    client = Client(sid, token, http_client=proxy_client)

    # Send the message
    message = client.messages.create(
        from_=from_number,
        body=body,
        to=to_number
    )
    return message.sid

# Example usage
try:
    print(send_msg(
        "hello from local SSL disabled",
        "AC2b72b9d974267f404e9b72065ef32687",
        "fe294e7afc4e0178cc5529b83fc434a3",
        "+14155238886",
        "+916354888981"
    ))
except Exception as e:
    print("Error:", e)
