import requests

# Define the Gupshup credentials
WA_USER = '2000211779'  # Replace with your actual user ID
WA_PASSWORD = '$#g5Mwk5'  # Replace with your actual password

def fetch_templates(user_id, password):
    try:
        # API endpoint for fetching templates
        url = f"https://api.gupshup.io/sm/api/v1/template/list"

        # Define query parameters
        params = {
            'userid': user_id,
            'password': password,
        }

        # Send GET request to Gupshup API
        response = requests.get(url, params=params)

        # Raise an error for HTTP response codes >= 400
        response.raise_for_status()

        # Parse JSON response
        templates = response.json()
        return templates

    except requests.exceptions.RequestException as e:
        print(f"Error fetching templates: {e}")
        return None

# Call the function to fetch templates
templates = fetch_templates(WA_USER, WA_PASSWORD)

# Display the templates
if templates:
    print("Templates fetched successfully:")
    for template in templates:
        print(template)
else:
    print("Failed to fetch templates.")
